"use strict";(self.webpackChunkotter_shell=self.webpackChunkotter_shell||[]).push([[211],{3905:(e,a,n)=>{n.d(a,{Zo:()=>c,kt:()=>m});var r=n(67294);function t(e,a,n){return a in e?Object.defineProperty(e,a,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[a]=n,e}function o(e,a){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);a&&(r=r.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var a=1;a<arguments.length;a++){var n=null!=arguments[a]?arguments[a]:{};a%2?o(Object(n),!0).forEach((function(a){t(e,a,n[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))}))}return e}function l(e,a){if(null==e)return{};var n,r,t=function(e,a){if(null==e)return{};var n,r,t={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],a.indexOf(n)>=0||(t[n]=e[n]);return t}(e,a);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],a.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(t[n]=e[n])}return t}var i=r.createContext({}),d=function(e){var a=r.useContext(i),n=a;return e&&(n="function"==typeof e?e(a):s(s({},a),e)),n},c=function(e){var a=d(e.components);return r.createElement(i.Provider,{value:a},e.children)},p={inlineCode:"code",wrapper:function(e){var a=e.children;return r.createElement(r.Fragment,{},a)}},u=r.forwardRef((function(e,a){var n=e.components,t=e.mdxType,o=e.originalType,i=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),u=d(n),m=t,N=u["".concat(i,".").concat(m)]||u[m]||p[m]||o;return n?r.createElement(N,s(s({ref:a},c),{},{components:n})):r.createElement(N,s({ref:a},c))}));function m(e,a){var n=arguments,t=a&&a.mdxType;if("string"==typeof e||t){var o=n.length,s=new Array(o);s[0]=u;var l={};for(var i in a)hasOwnProperty.call(a,i)&&(l[i]=a[i]);l.originalType=e,l.mdxType="string"==typeof e?e:t,s[1]=l;for(var d=2;d<o;d++)s[d]=n[d];return r.createElement.apply(null,s)}return r.createElement.apply(null,n)}u.displayName="MDXCreateElement"},52763:(e,a,n)=>{n.r(a),n.d(a,{assets:()=>i,contentTitle:()=>s,default:()=>p,frontMatter:()=>o,metadata:()=>l,toc:()=>d});var r=n(87462),t=(n(67294),n(3905));const o={sidebar_position:27},s="Instalaci\xf3n y configuraci\xf3n de un servidor DNS esclavo",l={unversionedId:"Tasks/DNS_esclavo",id:"Tasks/DNS_esclavo",title:"Instalaci\xf3n y configuraci\xf3n de un servidor DNS esclavo",description:"Procedimiento",source:"@site/docs/Tasks/DNS_esclavo.md",sourceDirName:"Tasks",slug:"/Tasks/DNS_esclavo",permalink:"/docs/Tasks/DNS_esclavo",draft:!1,editUrl:"https://github.com/belennazareth/ottershell/blob/main/docs/Tasks/DNS_esclavo.md",tags:[],version:"current",sidebarPosition:27,frontMatter:{sidebar_position:27},sidebar:"tutorialSidebar",previous:{title:"Gesti\xf3n de pool de almacenamiento l\xf3gico en KVM/libvirt",permalink:"/docs/Tasks/almacenamiento_kvm_libvirt"},next:{title:"Protocolo DHCP",permalink:"/docs/Tasks/dhcp"}},i={},d=[{value:"Procedimiento",id:"procedimiento",level:2},{value:"Entrega",id:"entrega",level:2}],c={toc:d};function p(e){let{components:a,...o}=e;return(0,t.kt)("wrapper",(0,r.Z)({},c,o,{components:a,mdxType:"MDXLayout"}),(0,t.kt)("h1",{id:"instalaci\xf3n-y-configuraci\xf3n-de-un-servidor-dns-esclavo"},"Instalaci\xf3n y configuraci\xf3n de un servidor DNS esclavo"),(0,t.kt)("h2",{id:"procedimiento"},"Procedimiento"),(0,t.kt)("p",null,"Un servidor DNS esclavo contiene una r\xe9plica de las zonas del servidor maestro. Se debe producir una transferencia de zona (el esclavo hace una solicitud de la zona completa al maestro) para que se sincronicen los servidores."),(0,t.kt)("hr",null),(0,t.kt)("table",null,(0,t.kt)("thead",{parentName:"table"},(0,t.kt)("tr",{parentName:"thead"},(0,t.kt)("th",{parentName:"tr",align:"center"},"IPs"))),(0,t.kt)("tbody",{parentName:"table"},(0,t.kt)("tr",{parentName:"tbody"},(0,t.kt)("td",{parentName:"tr",align:"center"},"Servidor: 172.22.5.136")),(0,t.kt)("tr",{parentName:"tbody"},(0,t.kt)("td",{parentName:"tr",align:"center"},"Cliente: 172.22.1.35")),(0,t.kt)("tr",{parentName:"tbody"},(0,t.kt)("td",{parentName:"tr",align:"center"},"Esclavo: 172.22.4.145")))),(0,t.kt)("hr",null),(0,t.kt)("p",null,"1.- Crea otra m\xe1quina en Proxmox que tendr\xe1 el rol de servidor DNS esclavo. Instala bind9 y nombralo de manera adecuada para que tenga el nombre dns2.tunombre.org. Voy a suponer que la direcci\xf3n de esta nueva m\xe1quina es la 172.22.200.110. La transferencia de zona entre maestro y esclavo usa el puerto 53/tcp, \xe1brelo en el grupo de seguridad."),(0,t.kt)("p",null,"Para esto ejecutamos el siguiente comando:"),(0,t.kt)("pre",null,(0,t.kt)("code",{parentName:"pre",className:"language-bash"},"sudo hostnamectl set-hostname dns2\n")),(0,t.kt)("p",null,"Y editamos el fichero /etc/hosts para que tenga el nombre dns2.tunombre.org:"),(0,t.kt)("pre",null,(0,t.kt)("code",{parentName:"pre",className:"language-bash"},"127.0.1.1 dns2.nazareth.org dns2\n")),(0,t.kt)("p",null,"2.- Por seguridad, s\xf3lo debemos aceptar transferencias de zonas hac\xeda los esclavos autorizados, para ello en el fichero /etc/bind/named.conf.options, deshabilitamos las transferencias:"),(0,t.kt)("pre",null,(0,t.kt)("code",{parentName:"pre",className:"language-bash"}," options {\n     ...\n     allow-transfer { none; };\n     ...\n")),(0,t.kt)("p",null,"3.- Modificamos la definici\xf3n de las zona en el servidor DNS maestro. Modificamos el fichero /etc/bind/named.conf.local:"),(0,t.kt)("pre",null,(0,t.kt)("code",{parentName:"pre",className:"language-bash"},'include "/etc/bind/zones.rfc1918";\nzone "nazareth.org" {\n    type master;\n    file "db.nazareth.org";\n    allow-transfer { 172.22.4.145; };\n    notify yes;\n};\nzone "22.172.in-addr.arpa" {\n    type master;\n    file "db.172.22.0.0";\n    allow-transfer { 172.22.4.145; };\n    notify yes;\n};\n')),(0,t.kt)("ul",null,(0,t.kt)("li",{parentName:"ul"},(0,t.kt)("p",{parentName:"li"},"allow-tranfer: Se permite las transferencias de zonas al servidor DNS esclavo (172.22.200.110).")),(0,t.kt)("li",{parentName:"ul"},(0,t.kt)("p",{parentName:"li"},"notify yes: Cuando se reinicie el servidor DNS maestro se notificar\xe1 al esclavo que ha habido cambios para que solicite una transferencia de zona."))),(0,t.kt)("p",null,"4.- Modificamos la definici\xf3n de las zona en el servidor DNS esclavo. Modificamos el fichero /etc/bind/named.conf.local:"),(0,t.kt)("pre",null,(0,t.kt)("code",{parentName:"pre",className:"language-bash"},'include "/etc/bind/zones.rfc1918";\nzone "nazareth.org" {\n    type slave;\n    file "db.nazareth.org";\n    masters { 172.22.5.136; };\n};\nzone "22.172.in-addr.arpa" {\n    type slave;\n    file "db.172.22.0.0";\n    masters { 172.22.5.136; };\n};  \n')),(0,t.kt)("ul",null,(0,t.kt)("li",{parentName:"ul"},"type slave: Se indica que este servidor ser\xe1 esclavo para estas zonas."),(0,t.kt)("li",{parentName:"ul"},"masters: Se indica cu\xe1l es el maestro, para saber a que servidor hay que solicitar la transferencia de zona.")),(0,t.kt)("p",null,"5.- En el servidor DNS maestro a\xf1adimos la informaci\xf3n del servidor DNS esclavo en las zonas. En la zona de resoluci\xf3n directa, en el fichero /var/cache/bind/db.tunombre.org a\xf1adimos un nuevo registro NS y su correspondiente registro A:"),(0,t.kt)("pre",null,(0,t.kt)("code",{parentName:"pre",className:"language-bash"},"$TTL    86400\n@       IN      SOA     dns1.nazareth.org. root.nazareth.org. (\n                              1         ; Serial\n                         604800         ; Refresh\n                          86400         ; Retry\n                        2419200         ; Expire\n                          86400 )       ; Negative Cache TTL\n;\n\n@   IN  NS      dns1.nazareth.org.\n@   IN  NS      dns2.nazareth.org.\n@   IN  MX  10  correo.nazareth.org.\n\n$ORIGIN nazareth.org.\n\ndns1        IN  A   172.22.5.136\ndns2        IN  A   172.22.4.145\n...\n")),(0,t.kt)("p",null,"La zona de resoluci\xf3n inverso quedar\xeda de la siguiente forma, modificando el fichero /var/cache/bind/db.172.22.0.0:"),(0,t.kt)("pre",null,(0,t.kt)("code",{parentName:"pre",className:"language-bash"},"$TTL    86400\n@       IN      SOA     dns1.nazareth.org. root.nazareth.org. (\n                              1         ; Serial\n                         604800         ; Refresh\n                          86400         ; Retry\n                        2419200         ; Expire\n                          86400 )       ; Negative Cache TTL\n;\n\n@   IN  NS      dns1.nazareth.org.\n@   IN  NS      dns2.nazareth.org.\n\n$ORIGIN 22.172.in-addr.arpa.\n\n136.5       IN  PTR     dns1.nazareth.org.\n145.4       IN  PTR     dns2.nazareth.org.\n...\n")),(0,t.kt)("p",null,"*Nota: La informaci\xf3n de los registros de las zonas s\xf3lo se modifican en el servidor DNS maestro. Est\xe1s modificaciones se copia en el esclavo por medio de una transferencia de zona."),(0,t.kt)("p",null,"6.- Reinicia el servidor DNS maestro y esclavo. Puedes ver en el esclavo que se han producidos las transferencias de zonas:"),(0,t.kt)("pre",null,(0,t.kt)("code",{parentName:"pre",className:"language-bash"}," root@dns2:~# systemctl restart bind9\n root@dns2:~# tail /var/log/syslog\n ... dns2 named[5739]: zone 22.172.in-addr.arpa/IN: transferred serial 1\n ... dns2 named[5739]: transfer of '22.172.in-addr.arpa/IN' from 172.22.200.100#53: Transfer status: success\n ... dns2 named[5739]: transfer of '22.172.in-addr.arpa/IN' from 172.22.200.100#53: Transfer completed: ...\n ... dns2 named[5739]: managed-keys-zone: Key 20326 for zone . acceptance timer complete: key now trusted\n ... dns2 named[5739]: resolver priming query complete\n ... dns2 named[5739]: zone tunombre.org/IN: Transfer started.\n ... dns2 named[5739]: transfer of 'tunombre.org/IN' from 172.22.200.100#53: connected using 172.22.200.110#58461\n ... dns2 named[5739]: zone tunombre.org/IN: transferred serial 1\n ... dns2 named[5739]: transfer of 'tunombre.org/IN' from 172.22.200.100#53: Transfer status: success\n ... dns2 named[5739]: transfer of 'tunombre.org/IN' from 172.22.200.100#53: Transfer completed: ...\n")),(0,t.kt)("p",null,"7.- Si al reiniciar los servidores DNS tienes alg\xfan error, puedes detectar errores de sintaxis usando los siguientes comandos:"),(0,t.kt)("pre",null,(0,t.kt)("code",{parentName:"pre",className:"language-bash"}," named-checkzone tunombre.org /var/cache/bind/db.tunombre.org\n named-checkzone 22.172.in-addr.arpa /var/cache/bind/db.172.22.0.0  \n")),(0,t.kt)("p",null," Para detectar errores de configuraci\xf3n en ",(0,t.kt)("inlineCode",{parentName:"p"},"named.conf"),", podemos usar:"),(0,t.kt)("pre",null,(0,t.kt)("code",{parentName:"pre",className:"language-bash"}," named-checkconf\n")),(0,t.kt)("p",null,"8.- Configura el cliente con los dos servidores DNS. Para ello en su fichero /etc/resolv.conf utiliza dos directivas nameserver. Si hacemos una consulta desde un cliente, y el dns maestro no responde, responder\xe1 el esclavo. Prueba a realizar una consulta. \xbfQui\xe9n ha respondido?. Apaga el servidor maestro, y vuelve a hacer la misma consulta. \xbfHa respondido el servidor DNS esclavo?"),(0,t.kt)("p",null,"En el fichero ponemos dos directivas nameserver:"),(0,t.kt)("pre",null,(0,t.kt)("code",{parentName:"pre",className:"language-bash"},"nameserver 172.22.5.136\nnameserver 172.22.4.145\n")),(0,t.kt)("ul",null,(0,t.kt)("li",{parentName:"ul"},"Consulta con ambos servidores DNS:")),(0,t.kt)("p",null,(0,t.kt)("img",{alt:"DNS",src:n(39473).Z,width:"749",height:"655"})),(0,t.kt)("p",null,"Vemos en la \xfaltima l\xednea que ha respondido el servidor DNS maestro:"),(0,t.kt)("pre",null,(0,t.kt)("code",{parentName:"pre",className:"language-bash"},"...\n;; Query time: 0 msec\n;; SERVER: 172.22.5.136#53(172.22.5.136)    <<<\ud83d\udc1e\ud83d\udca5 IP del servidor DNS maestro \ud83d\udc1e\ud83d\udca5\n;; WHEN: Thu Feb 16 13:35:33 CET 2023\n;; MSG SIZE  rcvd: 139\n")),(0,t.kt)("p",null,"Y en el cuerpo de la respuesta vemos que el servidor DNS esclavo aparece tambi\xe9n:"),(0,t.kt)("pre",null,(0,t.kt)("code",{parentName:"pre",className:"language-bash"},"...\n;; ANSWER SECTION:\nnazareth.org.       86400   IN  NS  dns2.nazareth.org.  <<<\ud83c\udf40\ud83d\udc22 DNS esclavo \ud83c\udf40\ud83d\udc22\nnazareth.org.       86400   IN  NS  dns1.nazareth.org.  <<<\ud83e\uded0\ud83d\udc26 DNS maestro \ud83e\uded0\ud83d\udc26\n...\n")),(0,t.kt)("ul",null,(0,t.kt)("li",{parentName:"ul"},"Consulta con el servidor DNS maestro apagado:")),(0,t.kt)("p",null,(0,t.kt)("img",{alt:"DNS",src:n(954).Z,width:"746",height:"657"})),(0,t.kt)("p",null,"Vemos ha respondido el servidor DNS esclavo:"),(0,t.kt)("pre",null,(0,t.kt)("code",{parentName:"pre",className:"language-bash"},"...\n;; Query time: 0 msec\n;; SERVER: 172.22.4.145#53(172.22.4.145)    <<<\ud83d\udc1e\ud83d\udca5 IP del servidor DNS esclavo \ud83d\udc1e\ud83d\udca5\n;; WHEN: Thu Feb 16 13:59:17 CET 2023\n;; MSG SIZE  rcvd: 139\n")),(0,t.kt)("p",null,"Y en el cuerpo de la respuesta vemos que aparecen ambos servidores DNS:"),(0,t.kt)("pre",null,(0,t.kt)("code",{parentName:"pre",className:"language-bash"},"...\n;; ANSWER SECTION:\nnazareth.org.       86400   IN  NS  dns1.nazareth.org.  <<<\ud83e\uded0\ud83d\udc26 DNS maestro \ud83e\uded0\ud83d\udc26\nnazareth.org.       86400   IN  NS  dns2.nazareth.org.  <<<\ud83c\udf40\ud83d\udc22 DNS esclavo \ud83c\udf40\ud83d\udc22\n...\n")),(0,t.kt)("p",null,"9.- Vamos a modificar la informaci\xf3n de la zona. Para ello vamos a modificar en el servidor DNS maestro y en su fichero /var/cache/bind/db.tunombre.org vamos a a\xf1adir un nuevo registro:"),(0,t.kt)("pre",null,(0,t.kt)("code",{parentName:"pre",className:"language-bash"}," ...\nprueba      IN  A   172.22.200.120\n\n")),(0,t.kt)("p",null,(0,t.kt)("strong",{parentName:"p"},"Recuerda INCREMENTAR EL N\xdaMERO DE SERIE, para que al reiniciar el servidor DNS maestro se produzca la transferencia de zona.")),(0,t.kt)("p",null,"10.- Desde el cliente realiza una consulta para preguntar por la direcci\xf3n IP de prueba.tunombre.org. \xbfQui\xe9n ha respondido?. Apaga el servidor maestro, y vuelve a hacer la misma consulta. \xbfHa respondido el servidor DNS esclavo?. Comprueba en el esclavo que se ha producido la transferencia."),(0,t.kt)("p",null,(0,t.kt)("img",{alt:"DNS",src:n(88460).Z,width:"734",height:"545"})),(0,t.kt)("p",null,"Donde vemos que al hacer la consulta aparece como respuesta que esa direccion se encuentra en la ip que hemos registado anteriormente:"),(0,t.kt)("pre",null,(0,t.kt)("code",{parentName:"pre",className:"language-bash"},";; ANSWER SECTION:\nprueba.nazareth.org.    86400   IN  A   172.22.200.120  <<<\ud83c\udf40\ud83d\udc22 IP que hemos registrado \ud83c\udf40\ud83d\udc22\n")),(0,t.kt)("p",null,"Y en el pie de la respuesta vemos que ha respondido el servidor DNS maestro:"),(0,t.kt)("pre",null,(0,t.kt)("code",{parentName:"pre",className:"language-bash"},";; Query time: 0 msec\n;; SERVER: 172.22.5.136#53(172.22.5.136)    <<<\ud83d\udc1e\ud83d\udca5 IP del servidor DNS maestro \ud83d\udc1e\ud83d\udca5\n;; WHEN: Fri Feb 17 08:48:36 CET 2023\n;; MSG SIZE  rcvd: 92\n")),(0,t.kt)("p",null,"11.- Algunos trucos adicionales:"),(0,t.kt)("ul",null,(0,t.kt)("li",{parentName:"ul"},(0,t.kt)("p",{parentName:"li"},"Puedes manejar el servidor DNS con el comando rndc. Por ejemplo rndc reload: reinicia el servicio; rndc reload tunombre.org: Reinicia s\xf3lo esa zona; rndc flush: Borra la cach\xe9 de resoluciones guardadas en el servidor.")),(0,t.kt)("li",{parentName:"ul"},(0,t.kt)("p",{parentName:"li"},"Realiza una consulta al servidor maestro y el esclavo para comprobar que las respuestas son autorizadas (bit AA), adem\xe1s aseg\xfarate que coinciden los n\xfameros de serie:"),(0,t.kt)("pre",{parentName:"li"},(0,t.kt)("code",{parentName:"pre"},"dig +norec @x.x.x.x tunombre.org. soa\n"))),(0,t.kt)("li",{parentName:"ul"},(0,t.kt)("p",{parentName:"li"},"Solicita una copia completa de la zona y comprueba que s\xf3lo se puede hacer desde el esclavo:"),(0,t.kt)("pre",{parentName:"li"},(0,t.kt)("code",{parentName:"pre"},"dig @x.x.x.x tunombre.org. axfr\n"))),(0,t.kt)("li",{parentName:"ul"},(0,t.kt)("p",{parentName:"li"},(0,t.kt)("strong",{parentName:"p"},"Cada vez que realice una modificaci\xf3n en el servidor DNS maestro recuerda incrementar el n\xfamero de serie.")))),(0,t.kt)("h2",{id:"entrega"},"Entrega"),(0,t.kt)("p",null,(0,t.kt)("strong",{parentName:"p"},"1. Realizaci\xf3n del apartado 8.")),(0,t.kt)("p",null,"En el fichero ponemos dos directivas nameserver:"),(0,t.kt)("pre",null,(0,t.kt)("code",{parentName:"pre",className:"language-bash"},"nameserver 172.22.5.136\nnameserver 172.22.4.145\n")),(0,t.kt)("ul",null,(0,t.kt)("li",{parentName:"ul"},"Consulta con ambos servidores DNS:")),(0,t.kt)("p",null,(0,t.kt)("img",{alt:"DNS",src:n(39473).Z,width:"749",height:"655"})),(0,t.kt)("p",null,"Vemos en la \xfaltima l\xednea que ha respondido el servidor DNS maestro:"),(0,t.kt)("pre",null,(0,t.kt)("code",{parentName:"pre",className:"language-bash"},"...\n;; Query time: 0 msec\n;; SERVER: 172.22.5.136#53(172.22.5.136)    <<<\ud83d\udc1e\ud83d\udca5 IP del servidor DNS maestro \ud83d\udc1e\ud83d\udca5\n;; WHEN: Thu Feb 16 13:35:33 CET 2023\n;; MSG SIZE  rcvd: 139\n")),(0,t.kt)("p",null,"Y en el cuerpo de la respuesta vemos que el servidor DNS esclavo aparece tambi\xe9n:"),(0,t.kt)("pre",null,(0,t.kt)("code",{parentName:"pre",className:"language-bash"},"...\n;; ANSWER SECTION:\nnazareth.org.       86400   IN  NS  dns2.nazareth.org.  <<<\ud83c\udf40\ud83d\udc22 DNS esclavo \ud83c\udf40\ud83d\udc22\nnazareth.org.       86400   IN  NS  dns1.nazareth.org.  <<<\ud83e\uded0\ud83d\udc26 DNS maestro \ud83e\uded0\ud83d\udc26\n...\n")),(0,t.kt)("ul",null,(0,t.kt)("li",{parentName:"ul"},"Consulta con el servidor DNS maestro apagado:")),(0,t.kt)("p",null,(0,t.kt)("img",{alt:"DNS",src:n(954).Z,width:"746",height:"657"})),(0,t.kt)("p",null,"Vemos ha respondido el servidor DNS esclavo:"),(0,t.kt)("pre",null,(0,t.kt)("code",{parentName:"pre",className:"language-bash"},"...\n;; Query time: 0 msec\n;; SERVER: 172.22.4.145#53(172.22.4.145)    <<<\ud83d\udc1e\ud83d\udca5 IP del servidor DNS esclavo \ud83d\udc1e\ud83d\udca5\n;; WHEN: Thu Feb 16 13:59:17 CET 2023\n;; MSG SIZE  rcvd: 139\n")),(0,t.kt)("p",null,"Y en el cuerpo de la respuesta vemos que aparecen ambos servidores DNS:"),(0,t.kt)("pre",null,(0,t.kt)("code",{parentName:"pre",className:"language-bash"},"...\n;; ANSWER SECTION:\nnazareth.org.       86400   IN  NS  dns1.nazareth.org.  <<<\ud83e\uded0\ud83d\udc26 DNS maestro \ud83e\uded0\ud83d\udc26\nnazareth.org.       86400   IN  NS  dns2.nazareth.org.  <<<\ud83c\udf40\ud83d\udc22 DNS esclavo \ud83c\udf40\ud83d\udc22\n...\n")),(0,t.kt)("p",null,(0,t.kt)("strong",{parentName:"p"},"2. Transferencia de zonas: indica para que sirve el n\xfamero de serie. Explica con tus palabras qu\xe9 indican los tiempos que se configuran en el registro SOA.")),(0,t.kt)("p",null,"El numero de serie es un campo que se utiliza para identificar de forma unica a cada zona. Cuando se realiza una modificaci\xf3n en la zona, se debe incrementar el numero de serie para que el servidor DNS esclavo sepa que debe realizar una transferencia de zona. "),(0,t.kt)("p",null,"Los tiempos que se configuran en el registro SOA son:"),(0,t.kt)("ul",null,(0,t.kt)("li",{parentName:"ul"},(0,t.kt)("p",{parentName:"li"},(0,t.kt)("strong",{parentName:"p"},"Refresh:")," Tiempo que debe pasar entre consultas de refresco de la zona. Si el tiempo de refresco es 0, el servidor DNS esclavo no consultar\xe1 al maestro.")),(0,t.kt)("li",{parentName:"ul"},(0,t.kt)("p",{parentName:"li"},(0,t.kt)("strong",{parentName:"p"},"Retry:")," Tiempo que debe pasar entre consultas de refresco de la zona si el servidor DNS maestro no responde.")),(0,t.kt)("li",{parentName:"ul"},(0,t.kt)("p",{parentName:"li"},(0,t.kt)("strong",{parentName:"p"},"Expire:")," Tiempo que debe pasar para que el servidor DNS esclavo considere que la zona ha expirado.")),(0,t.kt)("li",{parentName:"ul"},(0,t.kt)("p",{parentName:"li"},(0,t.kt)("strong",{parentName:"p"},"Serial:")," N\xfamero de serie de la zona. Se incrementa cada vez que se realiza una modificaci\xf3n en la zona.")),(0,t.kt)("li",{parentName:"ul"},(0,t.kt)("p",{parentName:"li"},(0,t.kt)("strong",{parentName:"p"},"Negative Cache TTL"),": Tiempo que debe pasar para que el servidor DNS esclavo considere que la zona ha expirado."))),(0,t.kt)("p",null,(0,t.kt)("strong",{parentName:"p"},"3. Realizaci\xf3n del apartado 10.")),(0,t.kt)("p",null,(0,t.kt)("img",{alt:"DNS",src:n(88460).Z,width:"734",height:"545"})),(0,t.kt)("p",null,"Donde vemos que al hacer la consulta aparece como respuesta que esa direccion se encuentra en la ip que hemos registado anteriormente:"),(0,t.kt)("pre",null,(0,t.kt)("code",{parentName:"pre",className:"language-bash"},";; ANSWER SECTION:\nprueba.nazareth.org.    86400   IN  A   172.22.200.120  <<<\ud83c\udf40\ud83d\udc22 IP que hemos registrado \ud83c\udf40\ud83d\udc22\n")),(0,t.kt)("p",null,"Y en el pie de la respuesta vemos que ha respondido el servidor DNS maestro:"),(0,t.kt)("pre",null,(0,t.kt)("code",{parentName:"pre",className:"language-bash"},";; Query time: 0 msec\n;; SERVER: 172.22.5.136#53(172.22.5.136)    <<<\ud83d\udc1e\ud83d\udca5 IP del servidor DNS maestro \ud83d\udc1e\ud83d\udca5\n;; WHEN: Fri Feb 17 08:48:36 CET 2023\n;; MSG SIZE  rcvd: 92\n")),(0,t.kt)("p",null,(0,t.kt)("strong",{parentName:"p"},"4. Realiza el ejercicio que te va a proponer el profesor.")))}p.isMDXComponent=!0},954:(e,a,n)=>{n.d(a,{Z:()=>r});const r=n.p+"assets/images/taller2SRI5-2-efce3a6ab044b92846b2cb07df0565be.png"},88460:(e,a,n)=>{n.d(a,{Z:()=>r});const r=n.p+"assets/images/taller2SRI5-3-6c2074df6f27a74bdf59b1487edc4ddf.png"},39473:(e,a,n)=>{n.d(a,{Z:()=>r});const r=n.p+"assets/images/taller2SRI5-0d4eca40ddb614c6362190d87f7ad2a4.png"}}]);