"use strict";(self.webpackChunkotter_shell=self.webpackChunkotter_shell||[]).push([[260],{3905:(e,a,r)=>{r.d(a,{Zo:()=>s,kt:()=>m});var o=r(67294);function n(e,a,r){return a in e?Object.defineProperty(e,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[a]=r,e}function t(e,a){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);a&&(o=o.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),r.push.apply(r,o)}return r}function i(e){for(var a=1;a<arguments.length;a++){var r=null!=arguments[a]?arguments[a]:{};a%2?t(Object(r),!0).forEach((function(a){n(e,a,r[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):t(Object(r)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))}))}return e}function l(e,a){if(null==e)return{};var r,o,n=function(e,a){if(null==e)return{};var r,o,n={},t=Object.keys(e);for(o=0;o<t.length;o++)r=t[o],a.indexOf(r)>=0||(n[r]=e[r]);return n}(e,a);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);for(o=0;o<t.length;o++)r=t[o],a.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}var c=o.createContext({}),d=function(e){var a=o.useContext(c),r=a;return e&&(r="function"==typeof e?e(a):i(i({},a),e)),r},s=function(e){var a=d(e.components);return o.createElement(c.Provider,{value:a},e.children)},u={inlineCode:"code",wrapper:function(e){var a=e.children;return o.createElement(o.Fragment,{},a)}},p=o.forwardRef((function(e,a){var r=e.components,n=e.mdxType,t=e.originalType,c=e.parentName,s=l(e,["components","mdxType","originalType","parentName"]),p=d(r),m=n,f=p["".concat(c,".").concat(m)]||p[m]||u[m]||t;return r?o.createElement(f,i(i({ref:a},s),{},{components:r})):o.createElement(f,i({ref:a},s))}));function m(e,a){var r=arguments,n=a&&a.mdxType;if("string"==typeof e||n){var t=r.length,i=new Array(t);i[0]=p;var l={};for(var c in a)hasOwnProperty.call(a,c)&&(l[c]=a[c]);l.originalType=e,l.mdxType="string"==typeof e?e:n,i[1]=l;for(var d=2;d<t;d++)i[d]=r[d];return o.createElement.apply(null,i)}return o.createElement.apply(null,r)}p.displayName="MDXCreateElement"},54748:(e,a,r)=>{r.r(a),r.d(a,{assets:()=>c,contentTitle:()=>i,default:()=>u,frontMatter:()=>t,metadata:()=>l,toc:()=>d});var o=r(87462),n=(r(67294),r(3905));const t={sidebar_position:27},i="Protocolo DHCP",l={unversionedId:"Tasks/dhcp",id:"Tasks/dhcp",title:"Protocolo DHCP",description:"Procedimiento",source:"@site/docs/Tasks/dhcp.md",sourceDirName:"Tasks",slug:"/Tasks/dhcp",permalink:"/docs/Tasks/dhcp",draft:!1,editUrl:"https://github.com/belennazareth/ottershell/blob/main/docs/Tasks/dhcp.md",tags:[],version:"current",sidebarPosition:27,frontMatter:{sidebar_position:27},sidebar:"tutorialSidebar",previous:{title:"Instalaci\xf3n y configuraci\xf3n de un servidor DNS esclavo",permalink:"/docs/Tasks/DNS_esclavo"},next:{title:"Introducci\xf3n a iSCSI",permalink:"/docs/Tasks/iSCSI"}},c={},d=[{value:"Procedimiento",id:"procedimiento",level:2},{value:"Entrega",id:"entrega",level:2},{value:"1. Entrega la URL del repositorio GitHub donde has alojado todos los ficheros.",id:"1-entrega-la-url-del-repositorio-github-donde-has-alojado-todos-los-ficheros",level:3},{value:"2. Entrega el fichero de configuraci\xf3n del servidor DHCP despu\xe9s de ejecutar el playbook de ansible.",id:"2-entrega-el-fichero-de-configuraci\xf3n-del-servidor-dhcp-despu\xe9s-de-ejecutar-el-playbook-de-ansible",level:3},{value:"3. Entrega el fichero de configuraci\xf3n de red del cliente (para comprobar que toma direccionamiento din\xe1mico) y que ha tomado la direcci\xf3n reservada en el servidor DHCP.",id:"3-entrega-el-fichero-de-configuraci\xf3n-de-red-del-cliente-para-comprobar-que-toma-direccionamiento-din\xe1mico-y-que-ha-tomado-la-direcci\xf3n-reservada-en-el-servidor-dhcp",level:3},{value:"4. Entrega el fichero de configuraci\xf3n de red de la otra m\xe1quina cliente, la direcci\xf3n que ha tomado y el fichero de concesiones del servidor donde se demuestra que se ha repartido.",id:"4-entrega-el-fichero-de-configuraci\xf3n-de-red-de-la-otra-m\xe1quina-cliente-la-direcci\xf3n-que-ha-tomado-y-el-fichero-de-concesiones-del-servidor-donde-se-demuestra-que-se-ha-repartido",level:3},{value:"5. Comprueba que la nueva m\xe1quina cliente no tiene el servidor apache2 instalado, y una captura de pantalla comprobando que sigue siendo accesible el servidor web de cliente.",id:"5-comprueba-que-la-nueva-m\xe1quina-cliente-no-tiene-el-servidor-apache2-instalado-y-una-captura-de-pantalla-comprobando-que-sigue-siendo-accesible-el-servidor-web-de-cliente",level:3}],s={toc:d};function u(e){let{components:a,...r}=e;return(0,n.kt)("wrapper",(0,o.Z)({},s,r,{components:a,mdxType:"MDXLayout"}),(0,n.kt)("h1",{id:"protocolo-dhcp"},"Protocolo DHCP"),(0,n.kt)("h2",{id:"procedimiento"},"Procedimiento"),(0,n.kt)("p",null,"Vamos a continuar trabajando en el escenario que desarrollamos en la ",(0,n.kt)("a",{parentName:"p",href:"https://ottershell.vercel.app/docs/Tasks/router_nat"},"Pr\xe1ctica: Creaci\xf3n y configuraci\xf3n de un escenario router-nat"),"."),(0,n.kt)("p",null,"Para evitar los problemas que nos puede causar vagrant a la hora de trabajar con el DHCP (los clientes tendr\xedan dos servidores DHCP, el que estamos configurando y el de la red de mantenimiento por eth0), os sugiero:"),(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},"Que mont\xe9is el mismo escenario pero en kvm/libvirt, en relaci\xf3n a las redes:")),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"No tendr\xedamos la interfaz conectada a la red de mantenimiento de vagrant.")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Conectar\xedamos las m\xe1quinas a una red NAT sin dhcp (con IP est\xe1tica) que utilizar\xedamos para configurar las m\xe1quinas por ansible. Esto soluciona el problema de que las direcciones IP cambien en vagrant y tengamos que cambiar el inventario cada vez que creemos el escenario."))),(0,n.kt)("ol",{start:2},(0,n.kt)("li",{parentName:"ol"},"Ejecutamos el playbook de la pr\xe1ctica anterior y comprobamos que las m\xe1quinas tienen el funcionamiento esperado.")),(0,n.kt)("p",null,"A partir de esta configuraci\xf3n podr\xedamos seguir con esta pr\xe1ctica."),(0,n.kt)("p",null,"Queremos instalar un servidor DHCP en la m\xe1quina router para que configure de forma autom\xe1tica las m\xe1quinas que se conectan en la red interna. Tenemos que tener en cuenta lo siguiente:"),(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"La m\xe1quina cliente de la pr\xe1ctica anterior, que tiene instalado el servidor web, debe tener la misma IP que la que le as\xedgnate est\xe1ticamente, por lo tanto haremos una reserva para que tenga la misma IP.")),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Al a\xf1adir una nueva m\xe1quina a la red local (recuerda que no se le instalar\xe1 el servidor web) se configurar\xe1 de forma din\xe1mica.")),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Crea un nuevo rol en el playbook de ansible llamado dhcp que configure el servidor DHCP de forma correcta. Quiz\xe1s sea necesario modificar el comportamiento de alg\xfan rol de la pr\xe1ctica anterior.")),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Todos los par\xe1metros que reparta el servidor DHCP, as\xed como cualquier otro dato, por ejemplo la direcci\xf3n MAC del cliente se guardar\xe1n en variables.")),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"A\xf1ade una nueva m\xe1quina al escenario conectada a la red interna muy aislada. Vuelve a ejecutar el playbook y comprueba que todo funciona de forma correcta."))),(0,n.kt)("h2",{id:"entrega"},"Entrega"),(0,n.kt)("h3",{id:"1-entrega-la-url-del-repositorio-github-donde-has-alojado-todos-los-ficheros"},"1. Entrega la URL del repositorio GitHub donde has alojado todos los ficheros."),(0,n.kt)("h3",{id:"2-entrega-el-fichero-de-configuraci\xf3n-del-servidor-dhcp-despu\xe9s-de-ejecutar-el-playbook-de-ansible"},"2. Entrega el fichero de configuraci\xf3n del servidor DHCP despu\xe9s de ejecutar el playbook de ansible."),(0,n.kt)("h3",{id:"3-entrega-el-fichero-de-configuraci\xf3n-de-red-del-cliente-para-comprobar-que-toma-direccionamiento-din\xe1mico-y-que-ha-tomado-la-direcci\xf3n-reservada-en-el-servidor-dhcp"},"3. Entrega el fichero de configuraci\xf3n de red del cliente (para comprobar que toma direccionamiento din\xe1mico) y que ha tomado la direcci\xf3n reservada en el servidor DHCP."),(0,n.kt)("h3",{id:"4-entrega-el-fichero-de-configuraci\xf3n-de-red-de-la-otra-m\xe1quina-cliente-la-direcci\xf3n-que-ha-tomado-y-el-fichero-de-concesiones-del-servidor-donde-se-demuestra-que-se-ha-repartido"},"4. Entrega el fichero de configuraci\xf3n de red de la otra m\xe1quina cliente, la direcci\xf3n que ha tomado y el fichero de concesiones del servidor donde se demuestra que se ha repartido."),(0,n.kt)("h3",{id:"5-comprueba-que-la-nueva-m\xe1quina-cliente-no-tiene-el-servidor-apache2-instalado-y-una-captura-de-pantalla-comprobando-que-sigue-siendo-accesible-el-servidor-web-de-cliente"},"5. Comprueba que la nueva m\xe1quina cliente no tiene el servidor apache2 instalado, y una captura de pantalla comprobando que sigue siendo accesible el servidor web de cliente."))}u.isMDXComponent=!0}}]);