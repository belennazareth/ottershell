"use strict";(self.webpackChunkotter_shell=self.webpackChunkotter_shell||[]).push([[1246],{3905:(e,a,r)=>{r.d(a,{Zo:()=>d,kt:()=>m});var t=r(67294);function n(e,a,r){return a in e?Object.defineProperty(e,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[a]=r,e}function s(e,a){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);a&&(t=t.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),r.push.apply(r,t)}return r}function i(e){for(var a=1;a<arguments.length;a++){var r=null!=arguments[a]?arguments[a]:{};a%2?s(Object(r),!0).forEach((function(a){n(e,a,r[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))}))}return e}function l(e,a){if(null==e)return{};var r,t,n=function(e,a){if(null==e)return{};var r,t,n={},s=Object.keys(e);for(t=0;t<s.length;t++)r=s[t],a.indexOf(r)>=0||(n[r]=e[r]);return n}(e,a);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(t=0;t<s.length;t++)r=s[t],a.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}var o=t.createContext({}),p=function(e){var a=t.useContext(o),r=a;return e&&(r="function"==typeof e?e(a):i(i({},a),e)),r},d=function(e){var a=p(e.components);return t.createElement(o.Provider,{value:a},e.children)},c={inlineCode:"code",wrapper:function(e){var a=e.children;return t.createElement(t.Fragment,{},a)}},u=t.forwardRef((function(e,a){var r=e.components,n=e.mdxType,s=e.originalType,o=e.parentName,d=l(e,["components","mdxType","originalType","parentName"]),u=p(r),m=n,k=u["".concat(o,".").concat(m)]||u[m]||c[m]||s;return r?t.createElement(k,i(i({ref:a},d),{},{components:r})):t.createElement(k,i({ref:a},d))}));function m(e,a){var r=arguments,n=a&&a.mdxType;if("string"==typeof e||n){var s=r.length,i=new Array(s);i[0]=u;var l={};for(var o in a)hasOwnProperty.call(a,o)&&(l[o]=a[o]);l.originalType=e,l.mdxType="string"==typeof e?e:n,i[1]=l;for(var p=2;p<s;p++)i[p]=r[p];return t.createElement.apply(null,i)}return t.createElement.apply(null,r)}u.displayName="MDXCreateElement"},67479:(e,a,r)=>{r.r(a),r.d(a,{assets:()=>o,contentTitle:()=>i,default:()=>c,frontMatter:()=>s,metadata:()=>l,toc:()=>p});var t=r(87462),n=(r(67294),r(3905));const s={sidebar_position:12},i="Ejercicios de modificaci\xf3n de par\xe1metros del k\xe9rnel",l={unversionedId:"Tasks/parametros_kernel",id:"Tasks/parametros_kernel",title:"Ejercicios de modificaci\xf3n de par\xe1metros del k\xe9rnel",description:"1. Deshabilita apparmor en el arranque.",source:"@site/docs/Tasks/parametros_kernel.md",sourceDirName:"Tasks",slug:"/Tasks/parametros_kernel",permalink:"/docs/Tasks/parametros_kernel",draft:!1,editUrl:"https://github.com/belennazareth/ottershell/blob/main/docs/Tasks/parametros_kernel.md",tags:[],version:"current",sidebarPosition:12,frontMatter:{sidebar_position:12},sidebar:"tutorialSidebar",previous:{title:"VirtualHosting con Apache",permalink:"/docs/Tasks/virtualhosting_apache"},next:{title:"Configuraci\xf3n del cliente VPN",permalink:"/docs/Tasks/cliente_vpn"}},o={},p=[{value:"1. Deshabilita apparmor en el arranque.",id:"1-deshabilita-apparmor-en-el-arranque",level:3},{value:"2. Deshabilita si es posible el Kernel Mode Setting (KSM) de la tarjeta gr\xe1fica.",id:"2-deshabilita-si-es-posible-el-kernel-mode-setting-ksm-de-la-tarjeta-gr\xe1fica",level:3},{value:"3. Cambia provisionalmente la swappiness para que la swap de tu equipo se active cuando se use m\xe1s de un 90% de la RAM.",id:"3-cambia-provisionalmente-la-swappiness-para-que-la-swap-de-tu-equipo-se-active-cuando-se-use-m\xe1s-de-un-90-de-la-ram",level:3},{value:"4. Haz que el cambio de la swappiness sea permanente.",id:"4-haz-que-el-cambio-de-la-swappiness-sea-permanente",level:3},{value:"5. Muestra el valor del bit de forward para IPv6.",id:"5-muestra-el-valor-del-bit-de-forward-para-ipv6",level:3},{value:"6. Deshabilita completamente las Magic Sysrq en el arranque y vuelve a habilitarlas despu\xe9s de reiniciar.",id:"6-deshabilita-completamente-las-magic-sysrq-en-el-arranque-y-vuelve-a-habilitarlas-despu\xe9s-de-reiniciar",level:3}],d={toc:p};function c(e){let{components:a,...s}=e;return(0,n.kt)("wrapper",(0,t.Z)({},d,s,{components:a,mdxType:"MDXLayout"}),(0,n.kt)("h1",{id:"ejercicios-de-modificaci\xf3n-de-par\xe1metros-del-k\xe9rnel"},"Ejercicios de modificaci\xf3n de par\xe1metros del k\xe9rnel"),(0,n.kt)("h3",{id:"1-deshabilita-apparmor-en-el-arranque"},"1. Deshabilita apparmor en el arranque."),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"Apparmor")," es un sistema encargado de controlar el acceso a la m\xe1quina, es decir, se encarga de comprobar que cada proceso esta autorizado una operaci\xf3n otorgando as\xed a cada programa un uso limitado de los recursos."),(0,n.kt)("p",null,"La informaci\xf3n de este paquete se guardan en ",(0,n.kt)("inlineCode",{parentName:"p"},"/etc/apparmor.d"),"."),(0,n.kt)("p",null,"Para deshabilitar ",(0,n.kt)("inlineCode",{parentName:"p"},"apparmor")," podemos seguir dos procedimientos diferentes:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Editar el fichero ",(0,n.kt)("inlineCode",{parentName:"p"},"/etc/default/grub")," a\xf1adiendo la l\xednea:"),(0,n.kt)("pre",{parentName:"li"},(0,n.kt)("code",{parentName:"pre"},'  GRUB_CMDLINE_LINUX_DEFAULT="$GRUB_CDMLINE_LINUX_DEFAULT apparmor=0"\n'))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Con el comando ",(0,n.kt)("inlineCode",{parentName:"p"},"systemctl")," deshabilitando desde la l\xednea de comandos:"),(0,n.kt)("pre",{parentName:"li"},(0,n.kt)("code",{parentName:"pre"},"  systemctl disable apparmor\n")))),(0,n.kt)("p",null,"Al reiniciar la m\xe1quina, si comprobamos el estado de ",(0,n.kt)("inlineCode",{parentName:"p"},"apparmor")," se puede ver:"),(0,n.kt)("p",null,(0,n.kt)("img",{alt:"Term",src:r(78859).Z,width:"873",height:"168"})),(0,n.kt)("h3",{id:"2-deshabilita-si-es-posible-el-kernel-mode-setting-ksm-de-la-tarjeta-gr\xe1fica"},"2. Deshabilita si es posible el Kernel Mode Setting (KSM) de la tarjeta gr\xe1fica."),(0,n.kt)("h3",{id:"3-cambia-provisionalmente-la-swappiness-para-que-la-swap-de-tu-equipo-se-active-cuando-se-use-m\xe1s-de-un-90-de-la-ram"},"3. Cambia provisionalmente la swappiness para que la swap de tu equipo se active cuando se use m\xe1s de un 90% de la RAM."),(0,n.kt)("p",null,"Para cambiar provisionalmente se puede usar el comando ",(0,n.kt)("inlineCode",{parentName:"p"},"sysctl vm.swappiness=10"),", esto har\xe1 que de forma temporal se use ",(0,n.kt)("inlineCode",{parentName:"p"},"swappiness")," cuando se est\xe9 usando m\xe1s de un 90% de la RAM.\nLos valores son inversos por lo que hay que tener cuidado al modificarlo, de tal manera que si dejamos la swappiness en un valor muy bajo se utilizar\xe1 \xfanicamente cuando nuestra memoria RAM est\xe9 a punto de agotarse, como es nuestro caso. Si se establece la swappiness en valores superiores se ir\xe1 incrementando el uso de la memoria virtual, por ejemplo en caso de usar 100 la memoria virtual se usar\xe1 todo el tiempo."),(0,n.kt)("p",null,(0,n.kt)("img",{alt:"Term",src:r(52505).Z,width:"476",height:"72"})),(0,n.kt)("p",null,"Para que se ejecuten los cambios no es neccesario el reinicio, se aplican de inmediato. Si se reinicia la m\xe1quina volver\xe1 a su valor por defecto, 60."),(0,n.kt)("h3",{id:"4-haz-que-el-cambio-de-la-swappiness-sea-permanente"},"4. Haz que el cambio de la swappiness sea permanente."),(0,n.kt)("p",null,"Para que sea permanente ser\xe1 necesario editar el fichero ",(0,n.kt)("inlineCode",{parentName:"p"},"/etc/sysctl.conf")," a\xf1adiendo la l\xednea: "),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre"},"vm.swappiness=10\n")),(0,n.kt)("h3",{id:"5-muestra-el-valor-del-bit-de-forward-para-ipv6"},"5. Muestra el valor del bit de forward para IPv6."),(0,n.kt)("p",null,"Para mostrarlo se usa el comando ",(0,n.kt)("inlineCode",{parentName:"p"},"sysctl")," de la siguiente manera:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre"},"    sudo sysctl -a | grep net.ipv6.conf.all.forwarding\n")),(0,n.kt)("p",null,(0,n.kt)("img",{alt:"Term",src:r(42421).Z,width:"955",height:"83"})),(0,n.kt)("h3",{id:"6-deshabilita-completamente-las-magic-sysrq-en-el-arranque-y-vuelve-a-habilitarlas-despu\xe9s-de-reiniciar"},"6. Deshabilita completamente las Magic Sysrq en el arranque y vuelve a habilitarlas despu\xe9s de reiniciar."),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"Magic Sysrq")," es una combinaci\xf3n de teclas que puede presionar a la que el n\xfacleo responder\xe1 independientemente de lo que est\xe9 haciendo, a menos que est\xe9 completamente bloqueado, realizando un reinicio del sistema."),(0,n.kt)("p",null,"Para saber si se encuentra activo podemos ver el fichero ",(0,n.kt)("inlineCode",{parentName:"p"},"/proc/sys/kernel/sysrq"),", en este podremos ver alguno de los siguientes valores, entre otros:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"0 \u2192 deshabilitar sysrq por completo")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"1 \u2192 habilitar todas las funciones de sysrq")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"438 \u2192 permite todas las funciones excepto la posibilidad de enviar se\xf1ales a procesos."))),(0,n.kt)("p",null,"Para deshabilitarla realizamos el siguiente comando:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre"},"    echo 0 >/proc/sys/kernel/sysrq\n")))}c.isMDXComponent=!0},52505:(e,a,r)=>{r.d(a,{Z:()=>t});const t=r.p+"assets/images/parmkernelASO-2-f2e247b276c1b7e37256a53820ec8591.png"},42421:(e,a,r)=>{r.d(a,{Z:()=>t});const t=r.p+"assets/images/parmkernelASO-3-763df11609e9abdba79fc4e3e8bd3417.png"},78859:(e,a,r)=>{r.d(a,{Z:()=>t});const t=r.p+"assets/images/parmkernelASO-83f78c9415701803167c2aac7dc2dc3f.png"}}]);