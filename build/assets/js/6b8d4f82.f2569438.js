"use strict";(self.webpackChunkotter_shell=self.webpackChunkotter_shell||[]).push([[2722],{3905:(e,a,n)=>{n.d(a,{Zo:()=>d,kt:()=>m});var t=n(7294);function r(e,a,n){return a in e?Object.defineProperty(e,a,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[a]=n,e}function o(e,a){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);a&&(t=t.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),n.push.apply(n,t)}return n}function i(e){for(var a=1;a<arguments.length;a++){var n=null!=arguments[a]?arguments[a]:{};a%2?o(Object(n),!0).forEach((function(a){r(e,a,n[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))}))}return e}function s(e,a){if(null==e)return{};var n,t,r=function(e,a){if(null==e)return{};var n,t,r={},o=Object.keys(e);for(t=0;t<o.length;t++)n=o[t],a.indexOf(n)>=0||(r[n]=e[n]);return r}(e,a);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(t=0;t<o.length;t++)n=o[t],a.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var l=t.createContext({}),p=function(e){var a=t.useContext(l),n=a;return e&&(n="function"==typeof e?e(a):i(i({},a),e)),n},d=function(e){var a=p(e.components);return t.createElement(l.Provider,{value:a},e.children)},c={inlineCode:"code",wrapper:function(e){var a=e.children;return t.createElement(t.Fragment,{},a)}},u=t.forwardRef((function(e,a){var n=e.components,r=e.mdxType,o=e.originalType,l=e.parentName,d=s(e,["components","mdxType","originalType","parentName"]),u=p(n),m=r,g=u["".concat(l,".").concat(m)]||u[m]||c[m]||o;return n?t.createElement(g,i(i({ref:a},d),{},{components:n})):t.createElement(g,i({ref:a},d))}));function m(e,a){var n=arguments,r=a&&a.mdxType;if("string"==typeof e||r){var o=n.length,i=new Array(o);i[0]=u;var s={};for(var l in a)hasOwnProperty.call(a,l)&&(s[l]=a[l]);s.originalType=e,s.mdxType="string"==typeof e?e:r,i[1]=s;for(var p=2;p<o;p++)i[p]=n[p];return t.createElement.apply(null,i)}return t.createElement.apply(null,n)}u.displayName="MDXCreateElement"},3896:(e,a,n)=>{n.r(a),n.d(a,{assets:()=>l,contentTitle:()=>i,default:()=>c,frontMatter:()=>o,metadata:()=>s,toc:()=>p});var t=n(7462),r=(n(7294),n(3905));const o={sidebar_position:24},i="Despliegue de aplicaciones python",s={unversionedId:"Tasks/despliegue_python",id:"Tasks/despliegue_python",title:"Despliegue de aplicaciones python",description:"Procedimiento",source:"@site/docs/Tasks/despliegue_python.md",sourceDirName:"Tasks",slug:"/Tasks/despliegue_python",permalink:"/docs/Tasks/despliegue_python",draft:!1,editUrl:"https://github.com/belennazareth/ottershell/blob/main/docs/Tasks/despliegue_python.md",tags:[],version:"current",sidebarPosition:24,frontMatter:{sidebar_position:24},sidebar:"tutorialSidebar",previous:{title:"Despliegue de aplicaciones Java",permalink:"/docs/Tasks/despliegue_java"},next:{title:"Redes Privadas Virtuales",permalink:"/docs/Tasks/vpn"}},l={},p=[{value:"Procedimiento",id:"procedimiento",level:2},{value:"Entorno de desarrollo",id:"entorno-de-desarrollo",level:3},{value:"Entorno de producci\xf3n",id:"entorno-de-producci\xf3n",level:3},{value:"Modificaci\xf3n de nuestra aplicaci\xf3n",id:"modificaci\xf3n-de-nuestra-aplicaci\xf3n",level:3},{value:"Entrega",id:"entrega",level:2}],d={toc:p};function c(e){let{components:a,...o}=e;return(0,r.kt)("wrapper",(0,t.Z)({},d,o,{components:a,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"despliegue-de-aplicaciones-python"},"Despliegue de aplicaciones python"),(0,r.kt)("h2",{id:"procedimiento"},"Procedimiento"),(0,r.kt)("h3",{id:"entorno-de-desarrollo"},"Entorno de desarrollo"),(0,r.kt)("p",null,"Lo primero ser\xe1 crear el entorno virtual y activarlo:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"mkdir venv  \ncd venv\n\npython3 -m venv django\nsource django/bin/activate\n")),(0,r.kt)("p",null,"Adem\xe1s, instalaremos la aplicaci\xf3n de Django:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"pip install django\n")),(0,r.kt)("p",null,"Despu\xe9s de realizar un fork del ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/josedom24/django_tutorial"},"repositorio de la aplicaci\xf3n"),", clonaremos el repositorio en la m\xe1quina local usando el comando ",(0,r.kt)("inlineCode",{parentName:"p"},"git clone")," con el ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/belennazareth/django_tutorial"},"repositorio"),"."),(0,r.kt)("p",null,"Para usar esta aplicaci\xf3n se va a trabajar usando una base de datos SQLite, por lo que no es necesario instalar ning\xfan servicio de base de datos. Para consultar el nombre de la base de datos, se puede ver el fichero ",(0,r.kt)("inlineCode",{parentName:"p"},"/django_tutorial/settings.py")," y vemos que su nombre es ",(0,r.kt)("inlineCode",{parentName:"p"},"db.sqlite3"),":"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},"# Database\n# https://docs.djangoproject.com/en/3.1/ref/settings/#databases\n\nDATABASES = {\n    'default': {\n        'ENGINE': 'django.db.backends.sqlite3',\n        'NAME': BASE_DIR / 'db.sqlite3',\n    }\n}\n")),(0,r.kt)("p",null,"A continuaci\xf3n, se va a crear una base de datos vac\xeda para la aplicaci\xf3n y un superusuario para poder acceder a la aplicaci\xf3n:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"python manage.py migrate\npython manage.py createsuperuser\n")),(0,r.kt)("p",null,"Adem\xe1s, es necesario editar el fichero ",(0,r.kt)("inlineCode",{parentName:"p"},"django_tutorial/settings.py")," y modificar la variable ",(0,r.kt)("inlineCode",{parentName:"p"},"ALLOWED_HOSTS")," para que pueda acceder sin problemas a la aplicaci\xf3n desde cualquier host:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},"ALLOWED_HOSTS = ['www.nazareth.gn.org']\n")),(0,r.kt)("p",null,"Para poder acceder, como estamos usando ",(0,r.kt)("inlineCode",{parentName:"p"},"bravo"),", debemos a\xf1adir una nueva regla ",(0,r.kt)("strong",{parentName:"p"},"DNAT")," para que se redirija el tr\xe1fico de la m\xe1quina ",(0,r.kt)("inlineCode",{parentName:"p"},"bravo")," al puerto ",(0,r.kt)("inlineCode",{parentName:"p"},"8000")," de la m\xe1quina ",(0,r.kt)("inlineCode",{parentName:"p"},"alfa")," editando el fichero ",(0,r.kt)("inlineCode",{parentName:"p"},"/etc/network/interfaces.d/50-cloud-init"),":"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"post-up iptables -t nat -A PREROUTING -p tcp --dport 8000 -i ens3 -j DNAT --to 172.16.0.200\n")),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"py",src:n(9970).Z,width:"1025",height:"622"})),(0,r.kt)("p",null,"Y reiniciamos la maquina para que se apliquen los cambios. "),(0,r.kt)("p",null,"Lo siguiente es ejecutar el servidor web de desarrollo para comprobar los datos que se han modificado entrando en la zona de administraci\xf3n de la aplicaci\xf3n (",(0,r.kt)("inlineCode",{parentName:"p"},"/admin"),"):"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"python manage.py runserver 0.0.0.0:8000\n")),(0,r.kt)("p",null,"Aparecer\xe1 una pantalla como la siguiente:"),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"py",src:n(2883).Z,width:"1089",height:"915"})),(0,r.kt)("p",null,"Si entramos en la zona de administraci\xf3n de la aplicaci\xf3n (",(0,r.kt)("inlineCode",{parentName:"p"},"/admin"),"), aparecer\xe1 una pantalla como la siguiente:"),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"py",src:n(8609).Z,width:"887",height:"692"})),(0,r.kt)("p",null,"Lo siguiente ser\xe1 entrar como administrador y crear un par de cuestiones. El usuario y contrase\xf1a que pide la p\xe1gina ",(0,r.kt)("inlineCode",{parentName:"p"},"/admin")," es el que se ha creado con el comando ",(0,r.kt)("inlineCode",{parentName:"p"},"python manage.py createsuperuser"),":"),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"py",src:n(7100).Z,width:"887",height:"692"}),"\n",(0,r.kt)("img",{alt:"py",src:n(8283).Z,width:"1181",height:"806"})),(0,r.kt)("p",null,"Una vez creadas las preguntas, podemos comprobar que se han creado correctamente entrando en ",(0,r.kt)("inlineCode",{parentName:"p"},"/polls"),":"),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"py",src:n(4714).Z,width:"889",height:"575"}),"\n",(0,r.kt)("img",{alt:"py",src:n(4401).Z,width:"889",height:"575"}),"\n",(0,r.kt)("img",{alt:"py",src:n(1740).Z,width:"889",height:"575"})),(0,r.kt)("h3",{id:"entorno-de-producci\xf3n"},"Entorno de producci\xf3n"),(0,r.kt)("h3",{id:"modificaci\xf3n-de-nuestra-aplicaci\xf3n"},"Modificaci\xf3n de nuestra aplicaci\xf3n"),(0,r.kt)("h2",{id:"entrega"},"Entrega"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"1. En este momento, muestra al profesor la aplicaci\xf3n funcionando. Entrega una documentaci\xf3n resumida donde expliques los pasos fundamentales para realizar esta tarea. Y pantallazos que demuestren que la aplicaci\xf3n est\xe1 funcionando. (3 puntos si eliges como entorno de desarrollo a bravo y 1 punto si eliges como entorno de desarrollo una m\xe1quina de openstack).")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"2. En este momento, muestra al profesor la aplicaci\xf3n funcionando. Entrega una documentaci\xf3n resumida donde expliques los pasos fundamentales para realizar esta tarea y pantallazos donde se vea que todo est\xe1 funcionando.")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"3. Explica los cambios que has realizado en el entorno de desarrollo y c\xf3mo lo has desplegado en producci\xf3n para cada una de las modificaciones. Entrega pantallazos donde se vean las distintas modificaciones y que todo est\xe1 funcionando.")))}c.isMDXComponent=!0},2883:(e,a,n)=>{n.d(a,{Z:()=>t});const t=n.p+"assets/images/desplieguePYIAW4-2-33a6753e859e696389a7e6a4cbde7f42.png"},8609:(e,a,n)=>{n.d(a,{Z:()=>t});const t=n.p+"assets/images/desplieguePYIAW4-3-4b13ab11b508916adb04c26d0d5c7386.png"},7100:(e,a,n)=>{n.d(a,{Z:()=>t});const t=n.p+"assets/images/desplieguePYIAW4-4-077137bc4dc50775d5791f08d7f7df80.png"},8283:(e,a,n)=>{n.d(a,{Z:()=>t});const t=n.p+"assets/images/desplieguePYIAW4-5-f584621eb51dad42d5523939462bbfe0.png"},4714:(e,a,n)=>{n.d(a,{Z:()=>t});const t=n.p+"assets/images/desplieguePYIAW4-6-e39c1fcc3989fa558d77572454dda3a7.png"},4401:(e,a,n)=>{n.d(a,{Z:()=>t});const t=n.p+"assets/images/desplieguePYIAW4-7-da1c24c5480823f71ed72c2192b68b22.png"},1740:(e,a,n)=>{n.d(a,{Z:()=>t});const t=n.p+"assets/images/desplieguePYIAW4-8-ea648a92011097cf6b89690ebd670cf9.png"},9970:(e,a,n)=>{n.d(a,{Z:()=>t});const t=n.p+"assets/images/desplieguePYIAW4-192853ea344c748fc8ce2367fe058b9e.png"}}]);