"use strict";(self.webpackChunkotter_shell=self.webpackChunkotter_shell||[]).push([[5365],{3905:(e,n,a)=>{a.d(n,{Zo:()=>d,kt:()=>m});var t=a(7294);function r(e,n,a){return n in e?Object.defineProperty(e,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[n]=a,e}function o(e,n){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),a.push.apply(a,t)}return a}function s(e){for(var n=1;n<arguments.length;n++){var a=null!=arguments[n]?arguments[n]:{};n%2?o(Object(a),!0).forEach((function(n){r(e,n,a[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))}))}return e}function i(e,n){if(null==e)return{};var a,t,r=function(e,n){if(null==e)return{};var a,t,r={},o=Object.keys(e);for(t=0;t<o.length;t++)a=o[t],n.indexOf(a)>=0||(r[a]=e[a]);return r}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(t=0;t<o.length;t++)a=o[t],n.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var l=t.createContext({}),c=function(e){var n=t.useContext(l),a=n;return e&&(a="function"==typeof e?e(n):s(s({},n),e)),a},d=function(e){var n=c(e.components);return t.createElement(l.Provider,{value:n},e.children)},p={inlineCode:"code",wrapper:function(e){var n=e.children;return t.createElement(t.Fragment,{},n)}},u=t.forwardRef((function(e,n){var a=e.components,r=e.mdxType,o=e.originalType,l=e.parentName,d=i(e,["components","mdxType","originalType","parentName"]),u=c(a),m=r,k=u["".concat(l,".").concat(m)]||u[m]||p[m]||o;return a?t.createElement(k,s(s({ref:n},d),{},{components:a})):t.createElement(k,s({ref:n},d))}));function m(e,n){var a=arguments,r=n&&n.mdxType;if("string"==typeof e||r){var o=a.length,s=new Array(o);s[0]=u;var i={};for(var l in n)hasOwnProperty.call(n,l)&&(i[l]=n[l]);i.originalType=e,i.mdxType="string"==typeof e?e:r,s[1]=i;for(var c=2;c<o;c++)s[c]=a[c];return t.createElement.apply(null,s)}return t.createElement.apply(null,a)}u.displayName="MDXCreateElement"},2457:(e,n,a)=>{a.r(n),a.d(n,{assets:()=>l,contentTitle:()=>s,default:()=>p,frontMatter:()=>o,metadata:()=>i,toc:()=>c});var t=a(7462),r=(a(7294),a(3905));const o={sidebar_position:15},s="Interconexi\xf3n de Servidores de Bases de Datos",i={unversionedId:"Tasks/interconexion_bbdd",id:"Tasks/interconexion_bbdd",title:"Interconexi\xf3n de Servidores de Bases de Datos",description:"Descripci\xf3n de la actividad",source:"@site/docs/Tasks/interconexion_bbdd.md",sourceDirName:"Tasks",slug:"/Tasks/interconexion_bbdd",permalink:"/docs/Tasks/interconexion_bbdd",draft:!1,editUrl:"https://github.com/belennazareth/ottershell/blob/main/docs/Tasks/interconexion_bbdd.md",tags:[],version:"current",sidebarPosition:15,frontMatter:{sidebar_position:15},sidebar:"tutorialSidebar",previous:{title:"Escenario en OpenStack",permalink:"/docs/Tasks/escenario_openstack"},next:{title:"Instalaci\xf3n de un servidor LEMP",permalink:"/docs/Tasks/lemp"}},l={},c=[{value:"Descripci\xf3n de la actividad",id:"descripci\xf3n-de-la-actividad",level:2},{value:"Puntos a tratar",id:"puntos-a-tratar",level:2},{value:"Interconexi\xf3n oracle a oracle",id:"interconexi\xf3n-oracle-a-oracle",level:3}],d={toc:c};function p(e){let{components:n,...o}=e;return(0,r.kt)("wrapper",(0,t.Z)({},d,o,{components:n,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"interconexi\xf3n-de-servidores-de-bases-de-datos"},"Interconexi\xf3n de Servidores de Bases de Datos"),(0,r.kt)("h2",{id:"descripci\xf3n-de-la-actividad"},"Descripci\xf3n de la actividad"),(0,r.kt)("p",null,"Las interconexiones de servidores de bases de datos son operaciones que pueden ser muy \xfatiles en diferentes contextos. B\xe1sicamente, se trata de acceder a datos que no est\xe1n almacenados en nuestra base de datos, pudiendo combinarlos con los que ya tenemos."),(0,r.kt)("p",null,"En esta pr\xe1ctica veremos varias formas de crear un enlace entre distintos servidores de bases de datos."),(0,r.kt)("h2",{id:"puntos-a-tratar"},"Puntos a tratar"),(0,r.kt)("p",null,"Se pide:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"\u2022 Realizar un enlace entre dos servidores de bases de datos ORACLE, explicando la configuraci\xf3n necesaria en ambos extremos y demostrando su funcionamiento.\n  \n\n\u2022 Realizar un enlace entre dos servidores de bases de datos Postgres, explicando la configuraci\xf3n necesaria en ambos extremos y demostrando su funcionamiento.\n  \n\n\u2022 Realizar un enlace entre un servidor ORACLE y otro Postgres o MySQL empleando Heterogeneus Services, explicando la configuraci\xf3n necesaria en ambos extremos y demostrando su funcionamiento.\n")),(0,r.kt)("h3",{id:"interconexi\xf3n-oracle-a-oracle"},"Interconexi\xf3n oracle a oracle"),(0,r.kt)("p",null,"Tenemos dos m\xe1quinas oracle con usuarios ",(0,r.kt)("inlineCode",{parentName:"p"},"oracle")," desde las que se realizar\xe1n las interconexiones:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"M\xe1quina 1 (",(0,r.kt)("inlineCode",{parentName:"li"},"debian10"),"):")),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"Repo",src:a(6211).Z,width:"1048",height:"333"})),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"M\xe1quina 2 (",(0,r.kt)("inlineCode",{parentName:"li"},"oraclesito"),"):")),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"Repo",src:a(1552).Z,width:"1038",height:"328"})),(0,r.kt)("p",null,"Para poder realizar la interconexi\xf3n de ambas m\xe1quinas se realizar\xe1n cambios en el fichero ",(0,r.kt)("inlineCode",{parentName:"p"},"listener.ora")," :"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"nano /opt/oracle/product/21c/dbhomeXE/network/admin/listener.ora\n")),(0,r.kt)("p",null,"A\xf1adimos las siguientes l\xedneas con las que se permitir\xe1n las conexiones hacia otras ",(0,r.kt)("inlineCode",{parentName:"p"},"IPs"),":"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"SID_LIST_LISTENER =\n (SID_LIST =\n  (SID_DESC =\n   (GLOBAL_DBNAME = orcl)\n   (ORACLE_HOME = /opt/oracle/product/21c/dbhomeXE)\n   (SID_NAME = orcl)\n  )\n )\n\nLISTENER=\n (DESCRIPTION_LIST =\n  (DESCRIPTION =\n   (ADDRESS_LIST =\n    (ADDRESS = (PROTOCOL = IPC)(KEY = EXTPROC1521))\n   )\n   (ADDRESS_LIST =\n    (ADDRESS = (PROTOCOL = TCP)(HOST = 0.0.0.0)(PORT = 1521))\n   )\n  )\n )\n")),(0,r.kt)("p",null,"A continuaci\xf3n, se crea el fichero ",(0,r.kt)("inlineCode",{parentName:"p"},"tnsnames.ora")," donde se declarar\xe1 el destino de la conexi\xf3n desde la m\xe1quina ",(0,r.kt)("inlineCode",{parentName:"p"},"debian10")," a ",(0,r.kt)("inlineCode",{parentName:"p"},"oraclesito"),":"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"LISTENER_ORACLE1 =\n  (ADDRESS = (PROTOCOL = TCP)(HOST = localhost)(PORT = 1521))\n\n\nORACLE1 =\n  (DESCRIPTION =\n    (ADDRESS = (PROTOCOL = TCP)(HOST = localhost)(PORT = 1521))\n    (CONNECT_DATA =\n      (SERVER = DEDICATED)\n      (SERVICE_NAME = oracle1)\n    )\n  )\n\nORACLE2 =\n  (DESCRIPTION =\n    (ADDRESS = (PROTOCOL = TCP)(HOST = 192.168.122.163)(PORT = 1521))\n    (CONNECT_DATA =\n      (SERVER = DEDICATED)\n      (SERVICE_NAME = orcl)\n    )\n  )\n")),(0,r.kt)("p",null,"Tras esto reiniciamos el servicio usando los comandos:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"lsnrctl stop\nlsnrctl start\n")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"*"," Nota:")," Hay que asegurarse de que las bases de datos est\xe9n iniciadas en ambas m\xe1quinas (entramos en la base datos con ",(0,r.kt)("inlineCode",{parentName:"p"},"sqlplus / as sysdba")," y ejecutamos ",(0,r.kt)("inlineCode",{parentName:"p"},"startup"),") y que se este ejecutando el listener en ambas m\xe1quinas (",(0,r.kt)("inlineCode",{parentName:"p"},"lsnrctl start"),")."),(0,r.kt)("p",null,"Lo siguiente ser\xe1 dar permisos al usuario (con ",(0,r.kt)("inlineCode",{parentName:"p"},"sysdba"),"), en este caso se llama ",(0,r.kt)("inlineCode",{parentName:"p"},"'nazareth'"),":"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"grant create database link to nazareth;\n")),(0,r.kt)("p",null,"Creamos un link o enlace hacia la otra m\xe1quina entrando primero a ",(0,r.kt)("inlineCode",{parentName:"p"},"sqlplus")," con el usuario ",(0,r.kt)("inlineCode",{parentName:"p"},"oracle")," y creando la siguiente base de datos:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"create database link enlaceoracle\nconnect to nazareth identified by nazareth\nusing 'ORACLE2';\n")))}p.isMDXComponent=!0},1552:(e,n,a)=>{a.d(n,{Z:()=>t});const t=a.p+"assets/images/interconexion-2-23ac0cfce079e3183a6af6ea7d8868ea.png"},6211:(e,n,a)=>{a.d(n,{Z:()=>t});const t=a.p+"assets/images/interconexion-d46f9744ab478a4584612d3164ce8004.png"}}]);