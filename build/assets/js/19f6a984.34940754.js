"use strict";(self.webpackChunkotter_shell=self.webpackChunkotter_shell||[]).push([[5259],{3905:(e,a,n)=>{n.d(a,{Zo:()=>p,kt:()=>h});var o=n(67294);function t(e,a,n){return a in e?Object.defineProperty(e,a,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[a]=n,e}function i(e,a){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);a&&(o=o.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),n.push.apply(n,o)}return n}function r(e){for(var a=1;a<arguments.length;a++){var n=null!=arguments[a]?arguments[a]:{};a%2?i(Object(n),!0).forEach((function(a){t(e,a,n[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))}))}return e}function s(e,a){if(null==e)return{};var n,o,t=function(e,a){if(null==e)return{};var n,o,t={},i=Object.keys(e);for(o=0;o<i.length;o++)n=i[o],a.indexOf(n)>=0||(t[n]=e[n]);return t}(e,a);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)n=i[o],a.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(t[n]=e[n])}return t}var l=o.createContext({}),c=function(e){var a=o.useContext(l),n=a;return e&&(n="function"==typeof e?e(a):r(r({},a),e)),n},p=function(e){var a=c(e.components);return o.createElement(l.Provider,{value:a},e.children)},u={inlineCode:"code",wrapper:function(e){var a=e.children;return o.createElement(o.Fragment,{},a)}},d=o.forwardRef((function(e,a){var n=e.components,t=e.mdxType,i=e.originalType,l=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),d=c(n),h=t,m=d["".concat(l,".").concat(h)]||d[h]||u[h]||i;return n?o.createElement(m,r(r({ref:a},p),{},{components:n})):o.createElement(m,r({ref:a},p))}));function h(e,a){var n=arguments,t=a&&a.mdxType;if("string"==typeof e||t){var i=n.length,r=new Array(i);r[0]=d;var s={};for(var l in a)hasOwnProperty.call(a,l)&&(s[l]=a[l]);s.originalType=e,s.mdxType="string"==typeof e?e:t,r[1]=s;for(var c=2;c<i;c++)r[c]=n[c];return o.createElement.apply(null,r)}return o.createElement.apply(null,n)}d.displayName="MDXCreateElement"},14922:(e,a,n)=>{n.r(a),n.d(a,{assets:()=>l,contentTitle:()=>r,default:()=>u,frontMatter:()=>i,metadata:()=>s,toc:()=>c});var o=n(87462),t=(n(67294),n(3905));const i={sidebar_position:15},r="Instalaci\xf3n de un servidor LEMP",s={unversionedId:"Tasks/lemp",id:"Tasks/lemp",title:"Instalaci\xf3n de un servidor LEMP",description:"1. Muestra un pantallazo de la salida del fichero info.php donde se vea que se est\xe1 ejecutando PHP sobre un servidor nginx.",source:"@site/docs/Tasks/lemp.md",sourceDirName:"Tasks",slug:"/Tasks/lemp",permalink:"/docs/Tasks/lemp",draft:!1,editUrl:"https://github.com/belennazareth/ottershell/blob/main/docs/Tasks/lemp.md",tags:[],version:"current",sidebarPosition:15,frontMatter:{sidebar_position:15},sidebar:"tutorialSidebar",previous:{title:"Interconexi\xf3n de Servidores de Bases de Datos",permalink:"/docs/Tasks/interconexion_bbdd"},next:{title:"Migraci\xf3n CentOS",permalink:"/docs/Tasks/migracion_centos"}},l={},c=[{value:"1. Muestra un pantallazo de la salida del fichero info.php donde se vea que se est\xe1 ejecutando PHP sobre un servidor nginx.",id:"1-muestra-un-pantallazo-de-la-salida-del-fichero-infophp-donde-se-vea-que-se-est\xe1-ejecutando-php-sobre-un-servidor-nginx",level:2},{value:"2. En el punto 2, muestra si FPM-PHP est\xe1 escuchando con Unix socket o TCP Socket) y la configuraci\xf3n que has hecho en nginx para trabajar con PHP-FPM.",id:"2-en-el-punto-2-muestra-si-fpm-php-est\xe1-escuchando-con-unix-socket-o-tcp-socket-y-la-configuraci\xf3n-que-has-hecho-en-nginx-para-trabajar-con-php-fpm",level:2},{value:"3. Pantallazos de bookmedik funcionando (despu\xe9s del login).",id:"3-pantallazos-de-bookmedik-funcionando-despu\xe9s-del-login",level:2},{value:"4. Configuraci\xf3n de PHP-FPM y nginx para que funcione el punto 4.",id:"4-configuraci\xf3n-de-php-fpm-y-nginx-para-que-funcione-el-punto-4",level:2},{value:"5. Si has utilizado el escenario anterior, \xbfhas cambiado alg\xfan fichero para cambiar la memoria utilizada?\xbfPor qu\xe9?. Si no has usado el escenario anterior, indica el fichero que has modificado.",id:"5-si-has-utilizado-el-escenario-anterior-has-cambiado-alg\xfan-fichero-para-cambiar-la-memoria-utilizadapor-qu\xe9-si-no-has-usado-el-escenario-anterior-indica-el-fichero-que-has-modificado",level:2}],p={toc:c};function u(e){let{components:a,...i}=e;return(0,t.kt)("wrapper",(0,o.Z)({},p,i,{components:a,mdxType:"MDXLayout"}),(0,t.kt)("h1",{id:"instalaci\xf3n-de-un-servidor-lemp"},"Instalaci\xf3n de un servidor LEMP"),(0,t.kt)("h2",{id:"1-muestra-un-pantallazo-de-la-salida-del-fichero-infophp-donde-se-vea-que-se-est\xe1-ejecutando-php-sobre-un-servidor-nginx"},"1. Muestra un pantallazo de la salida del fichero info.php donde se vea que se est\xe1 ejecutando PHP sobre un servidor nginx."),(0,t.kt)("p",null,(0,t.kt)("img",{alt:"Repo",src:n(33247).Z,width:"1132",height:"524"})),(0,t.kt)("h2",{id:"2-en-el-punto-2-muestra-si-fpm-php-est\xe1-escuchando-con-unix-socket-o-tcp-socket-y-la-configuraci\xf3n-que-has-hecho-en-nginx-para-trabajar-con-php-fpm"},"2. En el punto 2, muestra si FPM-PHP est\xe1 escuchando con Unix socket o TCP Socket) y la configuraci\xf3n que has hecho en nginx para trabajar con PHP-FPM."),(0,t.kt)("p",null,"Para configurarlo se ha editado el fichero:"),(0,t.kt)("pre",null,(0,t.kt)("code",{parentName:"pre"},"/etc/nginx/sites-available/bookmedik \n")),(0,t.kt)("p",null,"Descomentando la l\xednea para tcp quedando de la siguiente manera:"),(0,t.kt)("pre",null,(0,t.kt)("code",{parentName:"pre",className:"language-bash"},"        location ~ \\.php$ {\n                include snippets/fastcgi-php.conf;\n\n        #       # With php-fpm (or other unix sockets):\n        #       fastcgi_pass unix:/run/php/php7.4-fpm.sock;\n        #       # With php-cgi (or other tcp sockets):\n                fastcgi_pass 127.0.0.1:9000;\n        }\n")),(0,t.kt)("p",null,"Una posible comprobaci\xf3n ser\xeda ejecutar el comando ",(0,t.kt)("inlineCode",{parentName:"p"},"netstat -putan"),":"),(0,t.kt)("p",null,(0,t.kt)("img",{alt:"Repo",src:n(10575).Z,width:"1011",height:"79"})),(0,t.kt)("h2",{id:"3-pantallazos-de-bookmedik-funcionando-despu\xe9s-del-login"},"3. Pantallazos de bookmedik funcionando (despu\xe9s del login)."),(0,t.kt)("p",null,(0,t.kt)("img",{alt:"Repo",src:n(59519).Z,width:"1132",height:"849"})),(0,t.kt)("h2",{id:"4-configuraci\xf3n-de-php-fpm-y-nginx-para-que-funcione-el-punto-4"},"4. Configuraci\xf3n de PHP-FPM y nginx para que funcione el punto 4."),(0,t.kt)("p",null,"Primero se ha descomentado en el fichero ",(0,t.kt)("inlineCode",{parentName:"p"},"/etc/php/7.4/fpm/pool.d/www.conf")," la l\xednea:"),(0,t.kt)("pre",null,(0,t.kt)("code",{parentName:"pre"},"listen = /run/php/php7.4-fpm.sock\n")),(0,t.kt)("p",null,"Y en el fichero ",(0,t.kt)("inlineCode",{parentName:"p"},"/etc/nginx/sites-available/bookmedik")," editamos para descomentando la l\xednea para sockets:"),(0,t.kt)("pre",null,(0,t.kt)("code",{parentName:"pre",className:"language-bash"},"        location ~ \\.php$ {\n                include snippets/fastcgi-php.conf;\n\n        #       # With php-fpm (or other unix sockets):\n                fastcgi_pass unix:/run/php/php7.4-fpm.sock;\n        #       # With php-cgi (or other tcp sockets):\n        #       fastcgi_pass 127.0.0.1:9000;\n        }\n")),(0,t.kt)("p",null,"Y se ve que sigue funcionando la p\xe1gina:"),(0,t.kt)("p",null,(0,t.kt)("img",{alt:"Repo",src:n(98527).Z,width:"1132",height:"849"})),(0,t.kt)("h2",{id:"5-si-has-utilizado-el-escenario-anterior-has-cambiado-alg\xfan-fichero-para-cambiar-la-memoria-utilizadapor-qu\xe9-si-no-has-usado-el-escenario-anterior-indica-el-fichero-que-has-modificado"},"5. Si has utilizado el escenario anterior, \xbfhas cambiado alg\xfan fichero para cambiar la memoria utilizada?\xbfPor qu\xe9?. Si no has usado el escenario anterior, indica el fichero que has modificado."),(0,t.kt)("p",null,"Como se uso el mismo escenario no es necesario cambiar la memoria en  el fichero:"),(0,t.kt)("pre",null,(0,t.kt)("code",{parentName:"pre"},"/etc/php/7.4/fpm/php.ini\n")),(0,t.kt)("p",null,"Y en la linea "),(0,t.kt)("pre",null,(0,t.kt)("code",{parentName:"pre"},"memory_limit = 256M\n")),(0,t.kt)("p",null,"Porque la configuracion php es la misma, lo unico que cambi\xf3 es el servidor web de apache a nginx (no afecta a php)."))}u.isMDXComponent=!0},10575:(e,a,n)=>{n.d(a,{Z:()=>o});const o=n.p+"assets/images/taller5IAW2-2-58e2a1e6121133f9193a9676cf8acbac.png"},59519:(e,a,n)=>{n.d(a,{Z:()=>o});const o=n.p+"assets/images/taller5IAW2-3-efcc297134b3d86d29017af396887d32.png"},98527:(e,a,n)=>{n.d(a,{Z:()=>o});const o=n.p+"assets/images/taller5IAW2-4-870f458b2943dec6167c3118f1897a16.png"},33247:(e,a,n)=>{n.d(a,{Z:()=>o});const o=n.p+"assets/images/taller5IAW2-f99a8e29482c862b5a9f6be45ab5286f.png"}}]);